<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test: Disable Textbox When Choices are Presented</title>

<script type="text/javascript">

const style = document.createElement('style');
style.textContent = `
    .embeddedMessagingMessage:has(.slds-rich-text:contains("[[..triggerCustomEvent..]]")) {
        display: none !important;
    }
`;
document.head.appendChild(style);

window.addEventListener("message", function(event) {
    console.log("🛰️ [EinsteinBot Listener] Message event received:", event);

    if (
        event.data &&
        event.data.type === "message" &&
        event.data.message.includes("[[..triggerCustomEvent..]]")
    ) {
        const customEvent = new CustomEvent("EinsteinBotCustomEvent", {
            detail: {
                source: "einstein-bot",
                timestamp: new Date()
            }
        });
        window.dispatchEvent(customEvent);
        console.log("🚀 [EinsteinBot Listener] Custom event dispatched:", customEvent);
    }
});

</script>


</head>

<body>
  <h1>Test: Disable Textbox When Choices are Presented</h1>
</body>

<script type='text/javascript'>
	function initEmbeddedMessaging() {
		try {
			embeddedservice_bootstrap.settings.language = 'en_US'; // For example, enter 'en' or 'en-US'

			embeddedservice_bootstrap.init(
				'00D9O00000E20tZ',
				'DE_Messaging_for_Web',
				'https://pfizermedinfo--corytest.sandbox.my.site.com/ESWDEMessagingforWeb1731983263831',
				{
					scrt2URL: 'https://pfizermedinfo--corytest.sandbox.my.salesforce-scrt.com'
				}
			);
		} catch (err) {
			console.error('Error loading Embedded Messaging: ', err);
		}
	};
</script>
<script type='text/javascript' src='https://pfizermedinfo--corytest.sandbox.my.site.com/ESWDEMessagingforWeb1731983263831/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>

</html>